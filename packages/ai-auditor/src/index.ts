/**
 * @accessibility-toolkit/ai-auditor
 *
 * AI-powered accessibility auditing using Stagehand and Browserbase.
 * Provides intelligent WCAG auditing, keyboard navigation testing,
 * and accessibility tree analysis.
 *
 * @example
 * ```typescript
 * import {
 *   BrowserbaseClient,
 *   createLiveAuditSession,
 * } from '@accessibility-toolkit/ai-auditor';
 *
 * // Create a live audit session with Browserbase
 * const client = new BrowserbaseClient({
 *   apiKey: process.env.BROWSERBASE_API_KEY!,
 *   projectId: process.env.BROWSERBASE_PROJECT_ID!,
 * });
 *
 * const session = await createLiveAuditSession(client);
 * console.log(`Watch live: ${session.liveViewUrl}`);
 *
 * const results = await session.audit('https://example.com', {
 *   onProgress: (step) => console.log(step),
 *   onFinding: (finding) => console.log(finding),
 * });
 *
 * await session.close();
 * ```
 */

// =============================================================================
// Browserbase Integration
// =============================================================================

export {
    BrowserbaseClient,
    createBrowserbaseClient,
    type BrowserbaseConfig,
    type BrowserbaseSession,
} from './browserbase/client.js';

export {
    createLiveAuditSession,
    type AuditStreamCallbacks,
    type LiveAuditSession,
} from './browserbase/session.js';

// =============================================================================
// Stagehand Scanners
// =============================================================================

export {
    StagehandScanner,
    StagehandKeyboardTester,
    StagehandTreeAnalyzer,
    StagehandWcagAuditAgent,
    TestGenerator,
    // Prompt builders
    buildWcagAuditPrompt,
    buildCriteriaList,
    buildFocusedAuditPrompt,
    getKeyboardCriteria,
    getVisualCriteria,
    getFormsCriteria,
    getNavigationCriteria,
    getInitialAnalysisInstruction,
    getFinalSummaryInstruction,
    // Tree rules
    VALID_LANDMARK_ROLES,
    INTERACTIVE_ROLES,
    ROLES_REQUIRING_NAME,
    HEADING_ROLES,
    FORM_CONTROL_ROLES,
    VALID_ARIA_ROLES,
    TREE_ISSUE_WCAG_MAP,
    isValidRole,
    isLandmarkRole,
    isInteractiveRole,
    roleRequiresName,
    isFormControlRole,
    getHeadingLevelFromRole,
    // WCAG element mapping
    getRelatedCriteria,
    sortByWcagPriority,
    formatCriteriaComment,
} from './stagehand/index.js';

// =============================================================================
// Services
// =============================================================================

export {
    // Keyboard Test Service
    KeyboardTestService,
    createKeyboardTestService,
    // Tree Analysis Service
    TreeAnalysisService,
    createTreeAnalysisService,
    // WCAG Audit Service
    WcagAuditService,
    createWcagAuditService,
    // Test Generation Service
    TestGenerationService,
    createTestGenerationService,
    // Service interfaces
    type IKeyboardTestService,
    type ITreeAnalysisService,
    type IWcagAuditService,
    type TestGenerationConfig,
    type ITestGenerationService,
} from './services/index.js';

// =============================================================================
// Errors
// =============================================================================

export {
    // Test Generation Errors
    EffectTestGenNotInitializedError,
    EffectTestGenInitError,
    EffectTestGenNavigationError,
    EffectTestGenDiscoveryError,
    // Keyboard Test Errors
    EffectKeyboardTestInitError,
    EffectKeyboardTestError,
    EffectKeyboardTestNotInitializedError,
    // Tree Analysis Errors
    EffectTreeAnalysisInitError,
    EffectTreeAnalysisError,
    EffectTreeAnalysisNotInitializedError,
    // WCAG Audit Errors
    EffectWcagAuditInitError,
    EffectWcagAuditError,
    EffectWcagAuditNotInitializedError,
    // Error type unions
    type TestGenErrors,
    type KeyboardTestErrors,
    type TreeAnalysisErrors,
    type WcagAuditErrors,
    type StagehandErrors,
} from './errors.js';

// =============================================================================
// Types
// =============================================================================

export type {
    // Stagehand config types
    StagehandConfig,
    StagehandResults,

    // Keyboard testing types
    StagehandKeyboardConfig,
    StagehandKeyboardIssue,
    StagehandKeyboardIssueType,
    StagehandKeyboardResults,
    TabOrderEntry,

    // Tree analysis types
    TreeAnalysisConfig,
    TreeAnalysisResult,
    TreeIssue,
    TreeIssueType,
    A11yTreeNode,

    // WCAG audit types
    WcagAuditOptions,
    WcagAuditResult,
    AuditFinding,
    AuditStatus,

    // Test generation types
    ElementType,
    ElementDiscovery,
    TestGenerationOptions,
    TestGenerationResults,
} from './types.js';
